# HTML 网页处理指南

## 概述

本文档提供了 HTML 网页文件的处理指南，帮助您将本地保存的网页文件（如微信公众号文章、小红书笔记等）转换为可处理的格式，并提取其中的技能知识。

## 准备工作

### 1. HTML 文件准备

1. **保存网页**：在浏览器中打开目标网页（如微信公众号文章），右键选择「另存为」，保存为完整的 HTML 文件
2. **目录组织**：按照以下目录结构组织 HTML 文件：
   ```
   └── html/
       └── platform/          # 平台名称（如 wechat, xiaohongshu 等）
           └── account/       # 账号名称（如公众号名称）
               └── article/    # 文章标题
                   └── article.html  # 保存的 HTML 文件
   ```

### 2. 环境要求

- 确保已安装所有必要的依赖库
- 确保 LLM 处理模块已正确配置

## 处理流程

### 1. HTML 文件检查

在处理前，检查 HTML 文件是否完整：
- 确保文件包含完整的网页内容
- 检查是否包含必要的图片引用
- 确认文件大小合理（避免处理过大的文件）

### 2. HTML 处理操作

HTML 文件处理使用大语言模型直接读取和分析，无需额外的脚本处理。处理步骤如下：

1. **启动处理**：运行 HTML 处理命令
2. **模型选择**：根据网页内容复杂度选择合适的模型参数
3. **内容提取**：大语言模型会自动：
   - 识别网页的主要内容
   - 提取文本信息
   - 处理图片引用
   - 转换为结构化的 Markdown 格式

### 3. 处理命令

```bash
# HTML 处理命令
python scripts/process_html.py --html_dir html/wechat/account/article --output_dir llm_processed/wechat/account/article
```

## 目录结构

处理后的文件将按照以下结构组织：

```
llm_processed/
└── platform/          # 平台名称
    └── account/       # 账号名称
        └── article/    # 文章标题
            ├── article.md     # 转换后的 Markdown 文档
            ├── chapters/      # 章节文件
            └── images/        # 提取的图片
```

## 注意事项

### 1. 网页结构差异

不同网站的 HTML 结构可能存在差异，处理效果可能有所不同：
- **微信公众号**：通常结构清晰，处理效果较好
- **小红书**：可能包含较多动态内容，处理时需要注意
- **其他网站**：可能需要针对特定网站调整处理参数

### 2. 图片处理

- HTML 文件中的图片通常以相对路径或网络链接形式存在
- 处理过程会尝试保留图片引用
- 对于网络图片，确保处理时网络连接正常

### 3. 内容完整性

- 某些网页可能包含大量广告或无关内容
- 大语言模型会自动识别和过滤无关内容
- 处理后请检查生成的 Markdown 文档，确保重要内容未丢失

### 4. 处理时间

- HTML 文件处理时间取决于文件大小和内容复杂度
- 大型网页可能需要较长时间处理
- 建议先处理小型网页测试效果

## 故障排除

### 1. 处理失败

- **原因**：HTML 文件格式异常或内容损坏
- **解决**：重新保存网页，确保保存为完整的 HTML 文件

### 2. 内容缺失

- **原因**：网页使用动态加载技术，保存的 HTML 不完整
- **解决**：尝试使用浏览器的「打印为 PDF」功能，或使用专门的网页保存工具

### 3. 图片丢失

- **原因**：图片以网络链接形式存在，处理时无法访问
- **解决**：确保网络连接正常，或手动下载图片并更新引用路径

## 最佳实践

1. **选择合适的网页**：优先选择结构清晰、内容丰富的网页
2. **合理组织目录**：按照平台/账号/文章的结构组织 HTML 文件
3. **定期备份**：处理前备份原始 HTML 文件
4. **质量检查**：处理后仔细检查生成的 Markdown 文档
5. **持续优化**：根据不同网站的特点，调整处理参数和方法

## 后续步骤

处理完成后，您可以：
- 查看生成的 Markdown 文档
- 进行必要的内容调整
- 运行 Skill 提取命令提取技能知识
- 将提取的技能应用到实际场景

## 示例

以下是一个微信公众号文章的处理示例：

### 输入
```
html/
└── wechat/
    └── tech_blog/
        └── ai_development/
            └── article.html
```

### 输出
```
llm_processed/
└── wechat/
    └── tech_blog/
        └── ai_development/
            ├── article.md
            ├── chapters/
            │   ├── chapter_1.md
            │   └── chapter_2.md
            └── images/
                ├── image_1.jpg
                └── image_2.jpg
```

## 总结

HTML 网页处理是 Paper2Skill 工具的重要功能之一，通过大语言模型的强大能力，您可以轻松从各种网页中提取有价值的技能知识。遵循本指南的步骤和最佳实践，您将获得最佳的处理效果。